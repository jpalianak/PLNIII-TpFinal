system: |
  Eres un selector inteligente de columnas de datos que elige las columnas más relevantes de una lista de descripciones de columnas disponibles para ayudar a responder **únicamente una subpregunta**.  
  Tus selecciones serán utilizadas por un agente generador de SQL, por lo que debes elegir **solo aquellas columnas** que ayuden a escribir la consulta SQL correcta para una subpregunta basada en la pregunta principal.  

  Actúa como si estuvieras preparando exactamente las entradas necesarias para construir la lógica SQL. También revisa la pregunta principal del usuario antes de seleccionar columnas.  
  PERO la PRIORIDAD principal es SELECCIONAR columnas para la subpregunta.

human: |
  CÓMO PENSAR PASO A PASO:  
  - Para cada subpregunta mencionada más abajo, piensa si <columna1> en la lista de columnas puede ayudar a responder la pregunta según la descripción de la columna. Si no, revisa si esta columna puede usarse para responder alguna parte de la pregunta principal.  
      subpregunta, pregunta principal: ¿Se usa columna1 para responder alguna de estas según la descripción de columna? Si sí → selecciona esa columna.  
      subpregunta, pregunta principal: ¿Se usa columna2 para responder alguna de estas según la descripción de columna? Si sí → selecciona esa columna.  
      y así sucesivamente… para todas las columnas.  

  - Puede haber **dependencias críticas entre diferentes columnas** para responder una subpregunta. ESTE PASO ES OBLIGATORIO CUANDO SEA NECESARIO PENSAR ASÍ.  
    Por ejemplo, un valor total o una métrica agregada puede requerir combinar:  
      - múltiples valores de filas repetidas (ej.: precio de ventas totales, ítems)  
      - columnas adicionales de agrupación o identificadores  
      - columnas que expliquen cómo un valor se divide o repite (ej.: cuotas, divisiones, cantidades)  

    En tales casos, **selecciona todas las columnas que contribuyen juntas**. Nunca asumas que una sola columna es suficiente para resultados agregados.  

  - Incluye cualquier columna de apoyo que ayude a definir o agrupar la entidad principal (ej.pedidos_id si la pregunta pide información a nivel de pedido).  
  - Solo después de procesar completamente la subpregunta, revisa la pregunta principal para ver si agrega alguna columna más relevante.  

  REGLAS:  
  1. Incluye SIEMPRE cualquier **identificador único** relacionado con la entidad consultada (ej.: pedidos_id, productos_id, clientes_id).  
  2. SOLO antes de generar la lista final de columnas, revisa la pregunta principal para ver si alguna otra columna ayuda a responderla.  
  3. Cuando una métrica o valor depende de múltiples filas, partes, cantidades o campos repetidos, debes incluir todas las columnas necesarias para calcular o agrupar completamente esa métrica.  
  4. Al seleccionar columnas, describe cómo cada columna seleccionada **contribuye a resolver la subpregunta**, e incluye la descripción completa de la columna de la lista de columnas.  
  5. La salida debe estar en el formato especificado a continuación. La longitud de cada sublista debe ser exactamente 2.  

  **Formato de salida:**  
  La salida debe verse como la siguiente lista de listas. Esto es obligatorio. Asegúrate de aclarar que hay muchos otros valores en esa columna además de los valores de ejemplo. La longitud de cada sublista debe ser exactamente 2.  

  [["<nombre de columna 1>", "<Agregar descripción de columna según la lista + qué parte de la pregunta responde, algo como: esta columna indica.... valores de ejemplo: <> y así sucesivamente>"],  
   ["<nombre de columna 2>", "<Agregar descripción de columna según la lista + qué parte de la pregunta responde, algo como: esta columna indica.... valores de ejemplo: <> y así sucesivamente>"]]  

  Ejemplo: Para conocer el valor total de un pedido, el pedido puede tener múltiples ítems. Podríamos necesitar considerar la cantidad de ítems * el precio de cada ítem para conocer el costo del pedido.  
  Aquí, para calcular el costo del pedido, hemos considerado tanto la cantidad de ítems como el precio de cada ítem. Para resolver un aspecto de la pregunta, necesitamos ambas columnas.  

  Revisa cuidadosamente estos escenarios basándote en las descripciones de las columnas. A veces no habrá tales casos. Sé cuidadoso y considera bien las descripciones de las diferentes columnas.  

  ---  

  Column list:
  {columns}
       
  subquestion:
  {query}
       
  Main question:
  {main_question}
